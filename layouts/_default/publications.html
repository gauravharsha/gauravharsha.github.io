{{ define "head" }}
<meta name="description" content={{ .Site.Params.description }}>
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/css/index.css" media="all">

<!-- fontawesome -->
<script defer src="{{ .Site.Params.staticPath }}/fontawesome-6/all-6.4.2.js"></script>

<style>
  #publications {
    background-color: transparent !important;
  }

  #publications * {
    background-color: transparent !important;
  }

  #publications h3 {
    color: var(--text-secondary-color) !important;
    margin-bottom: 2rem;
  }

  #publications h5 {
    color: var(--text-secondary-color) !important;
    font-weight: 600;
  }

  #publications .card {
    background-color: var(--secondary-color) !important;
    border: none !important;
    border-radius: .75rem !important;
    box-shadow: 0px 8px 56px rgb(15 80 100 / 16%) !important;
  }

  #publications .card-body {
    background-color: var(--secondary-color) !important;
    padding: 1.5rem !important;
  }

  #publications .card-title {
    color: var(--text-color) !important;
    margin-bottom: 0.75rem !important;
    font-weight: 600 !important;
  }

  #publications .card-body small {
    color: var(--secondary-text-color) !important;
    opacity: 0.9 !important;
  }

  #publications .publication-content {
    color: var(--text-color) !important;
    opacity: 0.9 !important;
    line-height: 1.6 !important;
  }

  #publications .publication-content p {
    margin-bottom: 0.5rem !important;
  }

  #publications .btn-outline-primary {
    color: var(--text-link-color) !important;
    border-color: var(--primary-color) !important;
    background-color: transparent !important;
    font-weight: 500 !important;
    border-width: 2px !important;
  }

  #publications .btn-outline-primary:hover {
    background-color: var(--primary-color) !important;
    color: var(--secondary-color) !important;
    border-color: var(--primary-color) !important;
  }

  #publications .btn-outline-primary.disabled {
    color: var(--secondary-text-color) !important;
    opacity: 0.5 !important;
    cursor: not-allowed !important;
  }

  #publications .btn-sm {
    font-size: 0.875rem !important;
    padding: 0.375rem 0.75rem !important;
    margin-right: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
</style>
{{ end }}

{{ define "title" }}
{{ .Title }} | {{ .Site.Title }}
{{ end }}

{{ define "main" }}
<main id="content">
  {{ if .Params.publications.enable }}
  <section id="publications" class="py-5">
    <div class="container">
      <h3 class="text-center">{{ .Params.publications.title | default "Publications" }}</h3>
      <div class="row justify-content-center py-5">
        {{ $sorted := sort .Params.publications.items "year" "desc" }}
        {{ $currentYear := "" }}
        {{ $index := 0 }}
        
        {{ range $sorted }}
          {{ if ne .year $currentYear }}
            <div class="col-12 p-0 mt-4">
              <h5 class="text-center mb-4">{{ .year }}</h5>
            </div>
            {{ $currentYear = .year }}
          {{ end }}
          
          {{ $index = add $index 1 }}
          <div class="col-12 p-0">
            <div class="row row align-items-center justify-content-center m-1 mb-4">
              {{ if .Params.publications.index }}
              <div class="col-md-1 text-center me-2 p-0 d-none d-md-block">
                <div class="py-2">
                  <span class="index shadow-lg">
                    {{ $index }}
                  </span>
                </div>
              </div>
              {{ end }}

              <div class="col-md-9">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">{{ .title }}</h5>
                    
                    {{ if .authors }}
                    <div class="py-1">
                      <small><i>{{ .authors | markdownify }}</i></small>
                    </div>
                    {{ end }}

                    {{ if or .abstract .brief }}
                    <div class="py-1 publication-content">
                      {{ (or .abstract .brief "") | markdownify}}
                    </div>
                    {{ end }}

                    {{ if or .journal .arxiv .website }}
                    <div class="py-1">
                      {{ if .journal }}
                      {{ if .journal.url }}
                      <a href="{{ .journal.url }}" class="btn btn-sm btn-outline-primary" style="border-width: 2px; font-weight: 500;" target="_blank">
                        {{ .journal.name }}
                      </a>
                      {{ else }}
                      <span class="btn btn-sm btn-outline-primary disabled" style="border-width: 2px; font-weight: 500;">
                        {{ .journal.name }}
                      </span>
                      {{ end }}
                      {{ end }}
                      
                      {{ if .arxiv }}
                      <a href="https://arxiv.org/abs/{{ .arxiv }}" class="btn btn-sm btn-outline-primary" style="border-width: 2px; font-weight: 500;" target="_blank">
                        arXiv
                      </a>
                      {{ end }}
                      
                      {{ if .website }}
                      <a href="{{ .website }}" class="btn btn-sm" target="_blank">
                        WEBSITE
                      </a>
                      {{ end }}
                    </div>
                    {{ end }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}
</main>
{{ end }}
